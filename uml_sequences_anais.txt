title Authentification\nAnaïs Decolle

Actor Acheteur
participant EMarché
Acheteur -> EMarché: Authentification
EMarché -> Acheteur: Authentification réussie
------------------------
title Rechercher les ventes en cours par mots clés\nAnaïs Decolle

Actor Acheteur
participant EMarché
    Acheteur -> EMarché: Envoi mots clés
    EMarché -> EMarché: Recherche des ventes en cours avec la référence\nou la catégorie correspondante aux mots clés
    EMarché -> EMarché: Sélection des 20 premières ventes par prix croissant
    EMarché -> Acheteur: Liste des ventes en cours correspondantes\n(référence, catégorie, photo, prix, quantité, pseudoVendeur, dateLimite (si enchère))\n(20 max par page)
-------------------------
title Consulter les ventes en cours\nAnaïs Decolle

Actor Acheteur
participant EMarché
    EMarché -> EMarché: Recherche des ventes en cours 
    EMarché -> EMarché: Sélection des 20 premières ventes correspondantes\npar ordre d'ancienneté (en partant du plus récent)
    EMarché -> Acheteur: Liste des ventes en cours\n(référence, catégorie, photo, prix, quantité, pseudoVendeur, dateLimite (si enchère))\n(20 max par page)
-------------------------
title Rechercher un profil par mots clés\nAnaïs Decolle

Actor Acheteur
participant EMarché
    Acheteur -> EMarché: Envoi mots clés
    EMarché -> EMarché: Recherche des pseudos correspondants\naux mots clés
    EMarché -> EMarché: Sélection des 20 premiers pseudos correspondants
    EMarché -> Acheteur: Liste des profils correspondants\n(photo, pseudo, note)\n(20 max par page)
-------------------------
title Acheter un produit\nAnaïs Decolle
Actor Acheteur
participant EMarché
    Acheteur -> EMarché: Envoi produit choisi et quantité
    EMarché -> Acheteur: Formulaire coordonnées bancaires\n(nom, prénom, numéro de carte, type de carte : Visa ou Mastercard ou Paypal,\nnuméro secret, date de validité, adresse de livraison, adresse de facturation,\ntype de livraison : Colissimo ou envoi standard, confirmation de l'achat, acceptation des conditions générales de vente)
    Acheteur -> EMarché: Envoi coordonnées bancaires
    EMarché -> EMarché: Vérification de la validité des champs
    EMarché -> EMarché: Vérification des coordonnées bancaires\navec celles du profil
    EMarché -> EMarché: Enregistrement des données du formulaire
    alt Stock encore disponible après transaction
    	EMarché -> EMarché: Ajustement de la quantité restante du produit
    else Epuisement du stock
    	EMarché -> EMarché: Ajout dans les produits vendus
        EMarché -> Vendeur: Mise à jour des produits vendus dans le profil
        EMarché -> EMarché: Suppression du produit dans les ventes en cours
        EMarché -> Vendeur: Mise à jour des produits en vente dans le profil
    end
    EMarché -> Vendeur: Notification de la vente\n(pseudo de l'acheteur, adresse de livraison, adresse de facturation,\nproduit, quantité, date, heure, délai pour envoyer, type de livraison)
    EMarché -> Acheteur: Confirmation de l'achat
-------------------------
title Acheter un produit\ncas de coordonnées bancaires incorrectes avec le profil ou absentes\nAnaïs Decolle

Actor Acheteur
participant EMarché
activate EMarché
    EMarché -> Acheteur: Formulaire coordonnées bancaires\n(nom, prénom, numéro de carte, type de carte : Visa ou Mastercard ou Paypal,\nnuméro secret, date de validité, adresse de livraison, adresse de facturation,\ntype de livraison : Colissimo ou envoi standard, confirmation de l'achat, acceptation des conditions générales de vente)
    Acheteur -> EMarché: Envoi coordonnées bancaires
    EMarché -> EMarché: Vérification de la validité des champs
    EMarché -> EMarché: Vérification des coordonnées bancaires\navec celles du profil
    EMarché -> Acheteur: Coordonnées bancaires non enregistrées/incorrectes\nDemande de confirmation
    Acheteur -> EMarché: Confirmation de l'achat
    EMarché -> Acheteur: Proposition d'enregistrement des coordonnées bancaires
    alt Enregistrement accepté
    Acheteur -> EMarché: Confirmation de l'enregistrement
    EMarché -> EMarché: Enregistrement des coordonnées\nbancaires dans le profil de l'acheteur
    else Enregistrement refusé
    Acheteur -> EMarché: Refus de l'enregistrement
    end
    EMarché -> EMarché: Enregistrement des données du formulaire
    alt Stock encore disponible après transaction
    	EMarché -> EMarché: Ajustement de la quantité restante du produit
    else Epuisement du stock
    	EMarché -> EMarché: Ajout dans les produits vendus
        EMarché -> Vendeur: Mise à jour des produits vendus dans le profil
        EMarché -> EMarché: Suppression du produit dans les ventes en cours
        EMarché -> Vendeur: Mise à jour des produits en vente dans le profil
    end
    EMarché -> Vendeur: Notification de la vente\n(pseudo de l'acheteur, adresse de livraison, adresse de facturation,\nproduit, quantité, date, heure, délai pour envoyer, type de livraison)
    EMarché -> Acheteur: Confirmation de l'achat
deactivate EMarché
-------------------------
title Acheter un produit\ncas de champs invalides dans le formulaire des coordonnées bancaires\nAnaïs Decolle

Actor Acheteur
participant EMarché
activate EMarché
    EMarché -> Acheteur: Formulaire coordonnées bancaires\n(nom, prénom, numéro de carte, type de carte : Visa ou Mastercard ou Paypal,\nnuméro secret, date de validité, adresse de livraison, adresse de facturation,\ntype de livraison : Colissimo ou envoi standard, confirmation de l'achat, acceptation des conditions générales de vente)
    Acheteur -> EMarché: Envoi coordonnées bancaires
    EMarché -> EMarché: Vérification de la validité des champs
    EMarché -> EMarché: Vérification des coordonnées bancaires\navec celles du profil
    loop Champs du formulaire incorrects
    EMarché -> Acheteur: Formulaire de coordonnées bancaires
        Acheteur -> EMarché: Envoi coordonnées bancaires
    EMarché -> EMarché: Vérification de la validité des champs
    EMarché -> EMarché: Vérification des coordonnées bancaires\navec celles du profil
    end
    EMarché -> EMarché: Enregistrement des données du formulaire
    alt Stock encore disponible après transaction
    	EMarché -> EMarché: Ajustement de la quantité restante du produit
    else Epuisement du stock
    	EMarché -> EMarché: Ajout dans les produits vendus
        EMarché -> Vendeur: Mise à jour des produits vendus dans le profil
        EMarché -> EMarché: Suppression du produit dans les ventes en cours
        EMarché -> Vendeur: Mise à jour des produits en vente dans le profil
    end
    EMarché -> Vendeur: Notification de la vente\n(pseudo de l'acheteur, adresse de livraison, adresse de facturation,\nproduit, quantité, date, heure, délai pour envoyer, type de livraison)
    EMarché -> Acheteur: Confirmation de l'achat
deactivate EMarché
-------------------------
title Diagramme de cas d'utilisation de l'acheteur\nAnaïs Decolle

Actor Acheteur
left to right direction
Acheteur -- (Consulter les produits disponibles)
(Consulter les produits disponibles) ..> (Authentification) : include
Acheteur -- (Rechercher un produit par mots-clés)
(Rechercher un produit par mots-clés) ..> (Authentification) : include
Acheteur -- (Acheter un produit)
(Acheter un produit) ..> (Authentification) : include
Acheteur -- (Enchérir)
(Enchérir) ..> (Authentification) : include
Acheteur -- (Rechercher un profil)
(Rechercher un profil) ..> (Authentification) : include
Acheteur -- (Consulter un profil)
(Consulter un profil) ..> (Authentification) : include
Acheteur -- (Consulter son compte)
(Consulter son compte) ..> (Authentification) : include
Acheteur -- (Donner son avis sur un produit)
(Donner son avis sur un produit) ..> (Authentification) : include
Acheteur -- (Donner son avis sur un vendeur)
(Donner son avis sur un vendeur) ..> (Authentification) : incldue
Acheteur -- (Dialoguer avec un vendeur)
(Dialoguer avec un vendeur) ..> (Authentification) : include
Acheteur -- (Poser une réclamation)
(Poser une réclamation) ..> (Authentification) : include
Acheteur -- (Annuler un achat)
(Annuler un achat) ..> (Authentification) : include